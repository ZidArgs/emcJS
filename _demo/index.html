<html>
    <head>
        <title>emcJS sandbox</title>
        <meta charset="UTF-8">
        <meta name="description" content="Test for emcJS components">
        <meta name="robots" content="none">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta name="theme-color" content="#000000">
        <script type="module">
            import emcJS from "../index.js";

            emcJS.util.I18n.connect();
            emcJS.util.I18n.setTranslation("en_us", {
                down: "DOWN",
                down_tooltip: "this is a down tooltip",
                up_tooltip: "this is a up tooltip"
            });
            emcJS.util.I18n.setTranslation("de_de", {
                down: "RUNTER",
                down_tooltip: "dies ist ein runter tooltip",
                up_tooltip: "dies ist ein hoch tooltip"
            });
            window.setLang = function(lang) {
                emcJS.util.I18n.setLanguage(lang);
            }

            async function init() {

                let logic = await emcJS.util.FileLoader.json(`logic.json`);
                let graph = await emcJS.util.FileLoader.json(`graph.json`);

                let logicProcessor = new emcJS.util.logic.Processor(true);
                logicProcessor.loadLogic(logic);

                logicProcessor.setAll({
                    "item.a": true,
                    "item.b": true
                })
                logicProcessor.execute();

                logicProcessor.setAll({
                    "item.d": true,
                    "item.c": true
                });
                logicProcessor.execute();

                logicProcessor.setAll({
                    "item.a": false,
                    "item.g": true
                });
                logicProcessor.execute();

                logicProcessor.setAll({
                    "item.c": false,
                    "item.d": false,
                    "item.e": true
                });
                logicProcessor.execute();

                logicProcessor.setAll({
                    "item.e": false,
                    "item.g": false,
                });
                logicProcessor.execute();

                console.log(logicProcessor.getAll());
            }

            init();

            document.getElementById('savelogic').onclick = downloadLogic;

            async function downloadLogic() {
                emcJS.util.FileSystem.save(JSON.stringify(logic, " ", 4), `logic.json`);
            }



        </script>
    </head>
    <body>
        <button id="savelogic" i18n-content="down" i18n-tooltip="down_tooltip"></button>
    </body>
</html>